@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Reset global pour garantir la cohérence */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
    /* Empêcher le zoom automatique sur tous les navigateurs */
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    /* Empêcher le zoom sur mobile */
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    /* Forcer l'échelle à 1 */
    transform: scale(1);
    transform-origin: 0 0;
    /* Empêcher les débordements */
    overflow-x: hidden;
    /* Garantir la largeur correcte */
    width: 100%;
    max-width: 100vw;
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    /* Empêcher les débordements */
    overflow-x: hidden;
    overflow-y: auto;
    /* Garantir la largeur correcte */
    width: 100%;
    max-width: 100vw;
    /* Empêcher le zoom */
    touch-action: manipulation;
    /* Forcer l'échelle à 1 */
    transform: scale(1);
    transform-origin: 0 0;
  }

  #root {
    /* Empêcher les débordements */
    overflow-x: hidden;
    overflow-y: auto;
    /* Garantir la largeur correcte */
    width: 100%;
    max-width: 100vw;
    /* Forcer l'échelle à 1 */
    transform: scale(1);
    transform-origin: 0 0;
    /* Position relative pour les enfants */
    position: relative;
  }

  /* Empêcher le zoom automatique sur les champs de saisie sur iOS */
  input, textarea, select, button {
    font-size: 16px !important;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    /* Forcer l'échelle à 1 */
    transform: scale(1);
    transform-origin: 0 0;
    /* Empêcher le zoom */
    touch-action: manipulation;
    /* Garantir la taille correcte */
    min-height: 44px;
    min-width: 44px;
  }

  /* Empêcher le zoom sur les champs de saisie sur iOS Safari */
  @media screen and (-webkit-min-device-pixel-ratio: 0) {
    input, textarea, select, button {
      font-size: 16px !important;
    }
  }

  /* Règles spécifiques pour les boutons */
  button {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Règles pour empêcher les débordements */
  .container, .wrapper, .content {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }

  /* Améliorer le rendu des scrollbars */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.3);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(156, 163, 175, 0.5);
  }

  /* Empêcher les débordements sur les tableaux */
  table {
    width: 100%;
    max-width: 100%;
    table-layout: auto;
  }

  /* Conteneurs avec overflow-x-auto */
  .overflow-x-auto {
    max-width: 100%;
    width: 100%;
  }

  /* Empêcher les débordements sur les conteneurs flex */
  .flex {
    min-width: 0;
  }

  /* S'assurer que les éléments ne dépassent pas leur conteneur */
  .w-full {
    max-width: 100%;
  }

  /* Règles spécifiques pour les appareils mobiles */
  @media (max-width: 768px) {
    html, body {
      -webkit-text-size-adjust: none;
      -ms-text-size-adjust: none;
      text-size-adjust: none;
      touch-action: manipulation;
      /* Forcer l'échelle à 1 */
      transform: scale(1);
      transform-origin: 0 0;
      /* Empêcher les débordements */
      overflow-x: hidden;
      width: 100%;
      max-width: 100vw;
    }
    
    input, textarea, select, button {
      font-size: 16px !important;
      -webkit-appearance: none;
      appearance: none;
      /* Forcer l'échelle à 1 */
      transform: scale(1);
      transform-origin: 0 0;
      /* Empêcher le zoom */
      touch-action: manipulation;
    }

    /* Empêcher le zoom sur les images */
    img {
      max-width: 100%;
      height: auto;
      transform: scale(1);
      transform-origin: 0 0;
    }

    /* Empêcher le zoom sur les tableaux */
    table {
      width: 100%;
      max-width: 100%;
      transform: scale(1);
      transform-origin: 0 0;
    }
  }

  /* Règles spécifiques pour les très petits écrans */
  @media (max-width: 480px) {
    html, body {
      font-size: 14px;
    }
    
    input, textarea, select, button {
      font-size: 16px !important;
    }
  }

  /* Règles spécifiques pour iOS Safari */
  @supports (-webkit-touch-callout: none) {
    html, body {
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
      touch-action: manipulation;
    }
    
    input, textarea, select, button {
      font-size: 16px !important;
      -webkit-appearance: none;
      appearance: none;
    }
  }

  /* Règles spécifiques pour Safari */
  @media screen and (-webkit-min-device-pixel-ratio: 0) {
    html, body {
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
    }
  }

  /* Règles pour empêcher le zoom sur les éléments interactifs */
  a, button, input, textarea, select {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    touch-action: manipulation;
  }

  :root {
    --color-primary: 34 197 94; /* Green-500 */
    --color-primary-hover: 22 163 74; /* Green-600 */
    --color-secondary: 234 179 8; /* Yellow-500 */
    
    --color-positive: 34 197 94; /* Green-500 */
    --color-negative: 239 68 68; /* Red-500 */

    --color-background: 255 255 255; /* White */
    --color-background-surface: 249 250 251; /* Gray-50 */
    
    --color-text-primary: 17 24 39; /* Gray-900 */
    --color-text-secondary: 107 114 128; /* Gray-500 */
    
    --color-border: 229 231 235; /* Gray-200 */
  }

  .dark {
    --color-primary: 74 222 128; /* Green-400 */
    --color-primary-hover: 34 197 94; /* Green-500 */
    --color-secondary: 250 204 21; /* Yellow-400 */

    --color-positive: 74 222 128; /* Green-400 */
    --color-negative: 248 113 113; /* Red-400 */

    --color-background: 17 24 39; /* Gray-900 */
    --color-background-surface: 31 41 55; /* Gray-800 */
    
    --color-text-primary: 243 244 246; /* Gray-100 */
    --color-text-secondary: 156 163 175; /* Gray-400 */
    
    --color-border: 55 65 81; /* Gray-700 */
  }
}
